<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Programa de Himnos</title>
    
    <!-- MUY IMPORTANTE para móvil -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tu hoja de estilos con cache-busting -->
    <link rel="stylesheet" href="./styles.css?v=20260203" />

</head>
<body>

    <h1>Programa de Himnos – Nanakorobi</h1>

    
    <div id="banner" class="note hidden"></div>

    <!-- MANUAL DE USO - ESTILO INASUD -->
    <div class="manual-container">
    <h1 class="manual-title">Generador de Programa de Himnos</h1>
    <p class="manual-subtitle">
        Esta herramienta permite elaborar el Programa de Himnos mensual siguiendo la metodología utilizada
        en las comunidades de la Iglesia Nueva Apostólica Sudamérica.
    </p>


    <div class="manual-columns">
        <div>
        <h3>Modo Colaborador</h3>
        <p>
            Cargá los himnos de cada Servicio Divino usando “Agregar Servicio Divino”.<br>
            El sistema sugiere himnos según himnario y rubro, permite especificar estrofas
            y genera un texto estándar listo para enviar por WhatsApp al responsable del Programa mensual.
        </p>
        </div>

        <div>
        <h3>Modo Maestro</h3>
        <p>
            Pegá el texto recibido, revisá cada día, editá lo necesario y finalmente generá el
            <b>PDF oficial</b> del Programa mensual. Incluye encabezado, ensayos, marca de agua y formato apaisado.
        </p>
        </div>

        <div>
        <h3>Flujo recomendado</h3>
        <p>
            <b>Colaborador → Maestro → Exportar PDF</b><br>
            De esta forma asegurás un programa uniforme, completo y sin errores de transcripción.
        </p>
        </div>
    </div>

    <p class="manual-note">
        Nota: Para que la aplicación funcione correctamente, debe abrirse desde un servidor
        (python <i>http.server</i>, Live Server, etc.) ya que se carga el catálogo de himnos por <i>fetch</i>.
    </p>
    </div>

    <!-- Área operativa que manda en la pantalla -->
    <div class="app-container">
      <div class="btn-row" style="margin: 10px 0 16px 0; display:flex; gap:8px; flex-wrap:wrap;">
        <button id="modoColaborador">Modo Colaborador</button>
        <button id="modoMaestro">Modo Maestro</button>
      </div>

        <div class="topbar">
          <button id="btnSearchGlobal" class="btn-primary">Buscar himnos ( / )</button>
        </div>
    
      <!-- Rejilla de módulos: en Maestro podés activar .two-cols por JS si querés dos paneles -->
      <div class="module-grid" id="appGrid">
        <div id="colaborador" class="hidden"></div>
        <div id="maestro" class="hidden"></div>
      </div>
    
      <!-- Acciones importantes “sticky” en móvil (opcional) -->
      <div class="btn-row btn-row-sticky" id="stickyActions" style="display:none;">
        <button id="copiar">Copiar texto</button>
        <button id="exportarPDF">Exportar PDF</button>
      </div>
    </div>
        
    <!-- jsPDF (cliente) -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.23/dist/jspdf.plugin.autotable.min.js"></script>

    <!-- Panel de Búsqueda de Himnos (global) -->
    <div id="searchPanel" class="search-panel hidden" role="dialog" aria-modal="true">
      <div class="search-box">
        <div class="search-head">
          <input id="searchInput" type="text"
                 placeholder="Buscar por número, nombre, rubro o tema (atajo: /)"
                 autocomplete="off" />
          <button id="searchClose" class="search-close" title="Cerrar">✕</button>
        </div>
    
        <div class="search-filters">
          <label><input type="checkbox" class="flt-him" value="HR" checked> HR</label>
          <label><input type="checkbox" class="flt-him" value="HI" checked> HI</label>
          <label><input type="checkbox" class="flt-him" value="HC" checked> HC</label>
          <input id="searchRubro" type="text" placeholder="Filtrar por rubro (contiene…)" />
        </div>
    
        <div id="searchResults" class="search-results" role="listbox" aria-label="Resultados de himnos"></div>
    
        <div class="search-foot">
          <label class="inline">
            <input type="checkbox" id="searchAskStanzas"> Preguntar estrofas al insertar
          </label>
          <label class="inline">
            <input type="checkbox" id="searchInsertIntoLast"> Insertar en el último campo activo
          </label>
          <button id="searchCancel">Cancelar</button>
        </div>
      </div>
    </div>

    <script src="./app.js?v=20260203"></script>

</body>

</html>


